webpackJsonp([4],{"/Vo2":function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t("m8OI"),a=t.n(o),n=t("txrk"),s={data:function(){var e=this;return{userData:[],roleData:[],userForm:{username:"",password:"",checkPassword:""},userRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,validator:function(r,t,o){""===t?o(new Error("请输入密码")):(""!==e.userForm.checkPasswork&&e.$refs.userForm.validateField("checkPassword"),o())},trigger:"blur"}],checkPassword:[{required:!0,validator:function(r,t,o){""===t?o(new Error("请再次输入密码")):t!==e.userForm.password?o(new Error("两次输入密码不一致!")):o()},trigger:"blur"}],role:[{required:!0,message:"请选择用户组",trigger:"blur"}]},editorVisible:!1}},mounted:function(){this.getUserData(),this.getRoleData()},methods:{getUserData:function(){var e=this;Object(n.l)().then(function(r){return e.userData=r.data}).catch(function(r){return e.$message.error("获取用户列表失败："+r.message)})},getRoleData:function(){var e=this;Object(n.k)().then(function(r){return e.roleData=r.data}).catch(function(r){return e.$message.error("获取用户组列表失败："+r.message)})},deleteUser:function(e){var r=this;this.$confirm("确认删除用户？").then(function(t){Object(n.e)({id:e}).then(function(e){r.$message.success("删除成功"),r.getUserData()}).catch(function(e){return r.$message.error("删除用户失败："+e.message)})}).catch(function(e){return""})},createUser:function(){this.editorVisible=!0},submitAddUser:function(){var e=this;this.$refs.userForm.validate().then(function(r){e.questionnaireForm.create_time=new Date,Object(n.b)(e.userForm).then(function(r){e.editorVisible=!1,e.$message.success("添加用户成功"),e.getUserData()}).catch(function(r){return e.$message.error("添加用户失败："+r.message)})}).catch(function(e){return e})},handleUserCommand:function(e){var r=e.split(":"),t=a()(r,2),o=t[0],n=t[1];switch(o){case"delete":this.deleteUser(n)}}}},i={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"table"},[t("el-form",[t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.createUser}},[e._v("添加用户")])],1)],1),e._v(" "),t("el-table",{attrs:{data:e.userData,border:""}},[t("el-table-column",{attrs:{"header-align":"center",type:"index",width:"40"}}),e._v(" "),t("el-table-column",{attrs:{"header-align":"center",prop:"username",label:"用户名"}}),e._v(" "),t("el-table-column",{attrs:{"header-align":"center",prop:"role",label:"用户组"}}),e._v(" "),t("el-table-column",{attrs:{"header-align":"center",prop:"create_time",label:"创建时间"}}),e._v(" "),t("el-table-column",{attrs:{"header-align":"center",align:"center",label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(r){return t("el-dropdown",{attrs:{trigger:"click",placement:"bottom"},on:{command:e.handleUserCommand}},[t("el-button",{attrs:{size:"mini",icon:"el-icon-more-outline"}}),e._v(" "),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"delete:"+r.row.id}},[e._v("删除")])],1)],1)}}])})],1),e._v(" "),t("el-dialog",{attrs:{title:"创建用户",visible:e.editorVisible,top:"0"},on:{"update:visible":function(r){e.editorVisible=r}}},[t("el-form",{ref:"userForm",attrs:{model:e.userForm,rules:e.userRules,"label-position":"left","label-width":"120px"}},[t("el-form-item",{attrs:{label:"用户名",prop:"username"}},[t("el-input",{model:{value:e.userForm.username,callback:function(r){e.$set(e.userForm,"username",r)},expression:"userForm.username"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{model:{value:e.userForm.password,callback:function(r){e.$set(e.userForm,"password",r)},expression:"userForm.password"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"再次输入密码",prop:"checkPassword"}},[t("el-input",{model:{value:e.userForm.checkPassword,callback:function(r){e.$set(e.userForm,"checkPassword",r)},expression:"userForm.checkPassword"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"角色组",prop:"role"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.userForm.role,callback:function(r){e.$set(e.userForm,"role",r)},expression:"userForm.role"}},e._l(e.roleData,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(r){e.editorVisible=!1}}},[e._v("取消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.submitAddUser}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]},l=t("/4AN")(s,i,!1,function(e){t("U9bC")},"data-v-708ef0c0",null);r.default=l.exports},By4a:function(e,r,t){var o=t("ZHvQ"),a=t("Ug9I")("iterator"),n=t("dhak");e.exports=t("zKeE").isIterable=function(e){var r=Object(e);return void 0!==r[a]||"@@iterator"in r||n.hasOwnProperty(o(r))}},Lvd3:function(e,r,t){t("COf8"),t("i+u+"),e.exports=t("ugM7")},TEgB:function(e,r,t){t("COf8"),t("i+u+"),e.exports=t("By4a")},U9bC:function(e,r){},X9RM:function(e,r,t){e.exports={default:t("Lvd3"),__esModule:!0}},gkZy:function(e,r,t){e.exports={default:t("TEgB"),__esModule:!0}},m8OI:function(e,r,t){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var a=o(t("gkZy")),n=o(t("X9RM"));r.default=function(){return function(e,r){if(Array.isArray(e))return e;if((0,a.default)(Object(e)))return function(e,r){var t=[],o=!0,a=!1,s=void 0;try{for(var i,l=(0,n.default)(e);!(o=(i=l.next()).done)&&(t.push(i.value),!r||t.length!==r);o=!0);}catch(e){a=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(a)throw s}}return t}(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},ugM7:function(e,r,t){var o=t("zotD"),a=t("7AqT");e.exports=t("zKeE").getIterator=function(e){var r=a(e);if("function"!=typeof r)throw TypeError(e+" is not iterable!");return o(r.call(e))}}});